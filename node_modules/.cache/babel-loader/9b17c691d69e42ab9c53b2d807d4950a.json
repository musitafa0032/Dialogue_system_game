{"ast":null,"code":"import _objectSpread from\"/home/hanzhe/finalgame/react-xstate-colourchanger/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{send,assign,actions}from\"xstate\";import\"./styles.scss\";var cancel=actions.cancel;function say(text){return send(function(_context){return{type:\"SPEAK\",value:text};});}function listen(){return send('LISTEN');}function promptAndAsk(prompt,speechprompt,helpmes){return{initial:\"prompt\",states:{prompt:{entry:say(prompt),on:{ENDSPEECH:\"ask\"}},hist:{type:\"history\"},maxspeech:{entry:say(speechprompt),on:{ENDSPEECH:\"ask\"}},ask:{entry:[listen(),send('MAXSPEECH',{delay:5000,id:\"maxsp\"})]},help:{entry:say(helpmes),on:{ENDSPEECH:\"hist\"}},nomatch:{entry:say(\"Sorry, please say your English in a clear way\"),on:{ENDSPEECH:\"prompt\"}}}};}function hint(prompt,state){return{entry:say(prompt),on:{ENDSPEECH:state}};}var commands={\"help\":\"h\",\"Help\":\"H\"};var grammar3={\"count\":0};var grammar4={\"scores\":0};export var dmMachine={initial:'init',states:{init:{on:{CLICK:'welcome'}},welcome:_objectSpread({initial:\"prompt\",on:{RECOGNISED:[{target:\"query\",cond:function cond(context){return!(context.recResult in commands);},actions:[assign(function(context){return{option:context.recResult};}),assign(function(context){grammar3[\"count\"]=0;}),cancel(\"maxsp\")]},{target:\".help\",cond:function cond(context){return context.recResult in commands;}}],MAXSPEECH:[{target:\".maxspeech\",cond:function cond(context){return grammar3[\"count\"]<=2;},actions:assign(function(context){grammar3[\"count\"]=grammar3[\"count\"]+1;})},{target:\"#root.dm.init\",cond:function cond(context){return grammar3[\"count\"]>2;},actions:assign(function(context){grammar3[\"count\"]=0;})}]}},promptAndAsk(\"What would you like to do?\",\"You did not respond，just tell me what you want to do\",\"Please kindly tell me what you want to do\")),query:{invoke:{id:\"rasa\",src:function src(context,event){return nluRequest(context.option);},onDone:{target:\"menu\",actions:[assign(function(context,event){return{option:event.data.intent.name};}),function(context,event){return console.log(event.data);}]//actions: assign({ intent: (context: SDSContext, event: any) =>{ return event.data }})\n},onError:{target:\"welcome\",actions:function actions(context,event){return console.log(event.data);}}}},menu:{initial:\"prompt\",on:{ENDSPEECH:[{target:\"todo\",cond:function cond(context){return context.option===\"todo\";}},{target:\"timer\",cond:function cond(context){return context.option===\"timer\";}},{target:\"game\",cond:function cond(context){return context.option===\"game\";}}]},states:{prompt:{entry:send(function(context){return{type:\"SPEAK\",value:\"OK. I understand\\uFF0Cyou want a \".concat(context.option,\".\")};})}/*            nomatch: {\n                    entry: say(\"Sorry, I don\"t understand\"),\n                    on: { ENDSPEECH: \"prompt\" }\n        } */}},todo:{initial:\"prompt\",on:{ENDSPEECH:\"init\"},states:{prompt:{entry:send(function(context){return{type:\"SPEAK\",value:\"Let\\\"s create a to do item\"};})}}},timer:{initial:\"prompt\",on:{ENDSPEECH:\"init\"},states:{prompt:{entry:send(function(context){return{type:\"SPEAK\",value:\"Let\\\"s create a timer\"};})}}},game:{initial:\"prompt\",on:{ENDSPEECH:\"question1\"},states:{prompt:{entry:send(function(context){return{type:\"SPEAK\",value:\"Let\\\"s play How well do you know me and let's go to the first question\"};})}}},question1:_objectSpread({on:{RECOGNISED:[{cond:function cond(context){return context.recResult===\"a\";},actions:[assign(function(context){grammar4[\"scores\"]=grammar4[\"scores\"]+1;}),assign(function(context){grammar3[\"count\"]=0;}),cancel(\"maxsp\")],target:\"hint1\"},{cond:function cond(context){return context.recResult===\"A\";},actions:[assign(function(context){grammar4[\"scores\"]=grammar4[\"scores\"]+1;}),assign(function(context){grammar3[\"count\"]=0;}),cancel(\"maxsp\")],target:\"hint1\"},{cond:function cond(context){return context.recResult===\"mint green\";},actions:[assign(function(context){grammar4[\"scores\"]=grammar4[\"scores\"]+1;}),assign(function(context){grammar3[\"count\"]=0;}),cancel(\"maxsp\")],target:\"hint1\"},{cond:function cond(context){return context.recResult===\"b\";},actions:[assign(function(context){grammar3[\"count\"]=0;}),cancel(\"maxsp\")],target:\"hint2\"},{cond:function cond(context){return context.recResult===\"B\";},actions:[assign(function(context){grammar3[\"count\"]=0;}),cancel(\"maxsp\")],target:\"hint2\"},{cond:function cond(context){return context.recResult===\"purple\";},actions:[assign(function(context){grammar3[\"count\"]=0;}),cancel(\"maxsp\")],target:\"hint2\"},{target:\".nomatch\",cond:function cond(context){return!(context.recResult in commands);},actions:cancel(\"maxsp\")},{target:\".help\",cond:function cond(context){return context.recResult in commands;}}],MAXSPEECH:[{target:\".maxspeech\",cond:function cond(context){return grammar3[\"count\"]<=2;},actions:assign(function(context){grammar3[\"count\"]=grammar3[\"count\"]+1;})},{target:\"#root.dm.init\",cond:function cond(context){return grammar3[\"count\"]>2;},actions:assign(function(context){grammar3[\"count\"]=0;})}]}},promptAndAsk(\"What colour do I like?  A, mint green, B purple\",\"You did not respond, please tell me the colour\",\"Just choose one colour\")),hint1:_objectSpread({},hint(\"Yes! You are right! Let's move to the next question.\",\"question2\")),hint2:_objectSpread({},hint(\"Sorry! you are wrong! Let's move to the next question.\",\"question2\")),question2:_objectSpread({initial:\"prompt\",on:{RECOGNISED:[{cond:function cond(context){return context.recResult===\"a\";},actions:[assign(function(context){grammar4[\"scores\"]=grammar4[\"scores\"]+1;}),assign(function(context){grammar3[\"count\"]=0;}),cancel(\"maxsp\")],target:\"hint3\"},{cond:function cond(context){return context.recResult===\"A\";},actions:[assign(function(context){grammar4[\"scores\"]=grammar4[\"scores\"]+1;}),assign(function(context){grammar3[\"count\"]=0;}),cancel(\"maxsp\")],target:\"hint3\"},{cond:function cond(context){return context.recResult===\"pizza\";},actions:[assign(function(context){grammar4[\"scores\"]=grammar4[\"scores\"]+1;}),assign(function(context){grammar3[\"count\"]=0;}),cancel(\"maxsp\")],target:\"hint3\"},{cond:function cond(context){return context.recResult===\"b\";},actions:[assign(function(context){grammar3[\"count\"]=0;}),cancel(\"maxsp\")],target:\"hint4\"},{cond:function cond(context){return context.recResult===\"B\";},actions:[assign(function(context){grammar3[\"count\"]=0;}),cancel(\"maxsp\")],target:\"hint4\"},{cond:function cond(context){return context.recResult===\"dumplings\";},actions:[assign(function(context){grammar3[\"count\"]=0;}),cancel(\"maxsp\")],target:\"hint4\"},{target:\".nomatch\",cond:function cond(context){return!(context.recResult in commands);},actions:cancel(\"maxsp\")},{target:\".help\",cond:function cond(context){return context.recResult in commands;}}],MAXSPEECH:[{target:\".maxspeech\",cond:function cond(context){return grammar3[\"count\"]<=2;},actions:assign(function(context){grammar3[\"count\"]=grammar3[\"count\"]+1;})},{target:\"#root.dm.init\",cond:function cond(context){return grammar3[\"count\"]>2;},actions:assign(function(context){grammar3[\"count\"]=0;})}]}},promptAndAsk(\"What's my favourite food?  A, pizza, B dumplings\",\"You did not respond, please tell me your answer\",\"Just choose one food\")),hint3:_objectSpread({},hint(\"Yes! You are right! Let's continue to the next question.\",\"question3\")),hint4:_objectSpread({},hint(\"Sorry! you are wrong! Let's contiue to the next question.\",\"question3\")),question3:_objectSpread({initial:\"prompt\",on:{RECOGNISED:[{cond:function cond(context){return context.recResult===\"b\";},actions:[assign(function(context){grammar4[\"scores\"]=grammar4[\"scores\"]+1;}),assign(function(context){grammar3[\"count\"]=0;}),cancel(\"maxsp\")],target:\"hint5\"},{cond:function cond(context){return context.recResult===\"B\";},actions:[assign(function(context){grammar4[\"scores\"]=grammar4[\"scores\"]+1;}),assign(function(context){grammar3[\"count\"]=0;}),cancel(\"maxsp\")],target:\"hint5\"},{cond:function cond(context){return context.recResult===\"lavender\";},actions:[assign(function(context){grammar4[\"scores\"]=grammar4[\"scores\"]+1;}),assign(function(context){grammar3[\"count\"]=0;}),cancel(\"maxsp\")],target:\"hint5\"},{cond:function cond(context){return context.recResult===\"a\";},actions:[assign(function(context){grammar3[\"count\"]=0;}),cancel(\"maxsp\")],target:\"hint6\"},{cond:function cond(context){return context.recResult===\"A\";},actions:[assign(function(context){grammar3[\"count\"]=0;}),cancel(\"maxsp\")],target:\"hint6\"},{cond:function cond(context){return context.recResult===\"rosa\";},actions:[assign(function(context){grammar3[\"count\"]=0;}),cancel(\"maxsp\")],target:\"hint6\"},{target:\".nomatch\",cond:function cond(context){return!(context.recResult in commands);},actions:cancel(\"maxsp\")},{target:\".help\",cond:function cond(context){return context.recResult in commands;}}],MAXSPEECH:[{target:\".maxspeech\",cond:function cond(context){return grammar3[\"count\"]<=2;},actions:assign(function(context){grammar3[\"count\"]=grammar3[\"count\"]+1;})},{target:\"#root.dm.init\",cond:function cond(context){return grammar3[\"count\"]>2;},actions:assign(function(context){grammar3[\"count\"]=0;})}]}},promptAndAsk(\"What's my favourite flower?  A, rose, B lavender\",\"You did not respond, please tell me your answer\",\"Just choose one country\")),hint5:_objectSpread({},hint(\"Yes! You are right! Let's continue to the next question.\",\"question4\")),hint6:_objectSpread({},hint(\"Sorry! you are wrong! Let's contiue to the next question.\",\"question4\")),question4:_objectSpread({initial:\"prompt\",on:{RECOGNISED:[{cond:function cond(context){return context.recResult===\"b\";},actions:[assign(function(context){grammar4[\"scores\"]=grammar4[\"scores\"]+1;}),assign(function(context){grammar3[\"count\"]=0;}),cancel(\"maxsp\")],target:\"hint7\"},{cond:function cond(context){return context.recResult===\"B\";},actions:[assign(function(context){grammar4[\"scores\"]=grammar4[\"scores\"]+1;}),assign(function(context){grammar3[\"count\"]=0;}),cancel(\"maxsp\")],target:\"hint7\"},{cond:function cond(context){return context.recResult===\"cat\";},actions:[assign(function(context){grammar4[\"scores\"]=grammar4[\"scores\"]+1;}),assign(function(context){grammar3[\"count\"]=0;}),cancel(\"maxsp\")],target:\"hint7\"},{cond:function cond(context){return context.recResult===\"a\";},actions:[assign(function(context){grammar3[\"count\"]=0;}),cancel(\"maxsp\")],target:\"hint8\"},{cond:function cond(context){return context.recResult===\"A\";},actions:[assign(function(context){grammar3[\"count\"]=0;}),cancel(\"maxsp\")],target:\"hint8\"},{cond:function cond(context){return context.recResult===\"dog\";},actions:[assign(function(context){grammar3[\"count\"]=0;}),cancel(\"maxsp\")],target:\"hint8\"},{target:\".nomatch\",cond:function cond(context){return!(context.recResult in commands);},actions:cancel(\"maxsp\")},{target:\".help\",cond:function cond(context){return context.recResult in commands;}}],MAXSPEECH:[{target:\".maxspeech\",cond:function cond(context){return grammar3[\"count\"]<=2;},actions:assign(function(context){grammar3[\"count\"]=grammar3[\"count\"]+1;})},{target:\"#root.dm.init\",cond:function cond(context){return grammar3[\"count\"]>2;},actions:assign(function(context){grammar3[\"count\"]=0;})}]}},promptAndAsk(\"What's my favourite pet?  A, dog, B cat\",\"You did not respond, please tell me your answer\",\"Just choose one food\")),hint7:_objectSpread({},hint(\"Yes! You are right! Let's continue to the next question.\",\"question5\")),hint8:_objectSpread({},hint(\"Sorry! you are wrong! Let's contiue to the next question.\",\"question5\")),question5:_objectSpread({initial:\"prompt\",on:{RECOGNISED:[{cond:function cond(context){return context.recResult===\"b\";},actions:[assign(function(context){grammar4[\"scores\"]=grammar4[\"scores\"]+1;}),assign(function(context){grammar3[\"count\"]=0;}),cancel(\"maxsp\")],target:\"hint9\"},{cond:function cond(context){return context.recResult===\"B\";},actions:[assign(function(context){grammar4[\"scores\"]=grammar4[\"scores\"]+1;}),assign(function(context){grammar3[\"count\"]=0;}),cancel(\"maxsp\")],target:\"hint9\"},{cond:function cond(context){return context.recResult===\"coffee\";},actions:[assign(function(context){grammar4[\"scores\"]=grammar4[\"scores\"]+1;}),assign(function(context){grammar3[\"count\"]=0;}),cancel(\"maxsp\")],target:\"hint9\"},{cond:function cond(context){return context.recResult===\"a\";},actions:[assign(function(context){grammar3[\"count\"]=0;}),cancel(\"maxsp\")],target:\"hint10\"},{cond:function cond(context){return context.recResult===\"A\";},actions:[assign(function(context){grammar3[\"count\"]=0;}),cancel(\"maxsp\")],target:\"hint10\"},{cond:function cond(context){return context.recResult===\"tea\";},actions:[assign(function(context){grammar3[\"count\"]=0;}),cancel(\"maxsp\")],target:\"hint10\"},{target:\".nomatch\",cond:function cond(context){return!(context.recResult in commands);},actions:cancel(\"maxsp\")},{target:\".help\",cond:function cond(context){return context.recResult in commands;}}],MAXSPEECH:[{target:\".maxspeech\",cond:function cond(context){return grammar3[\"count\"]<=2;},actions:assign(function(context){grammar3[\"count\"]=grammar3[\"count\"]+1;})},{target:\"#root.dm.init\",cond:function cond(context){return grammar3[\"count\"]>2;},actions:assign(function(context){grammar3[\"count\"]=0;})}]}},promptAndAsk(\"What's my favourite drink?  A, tea, B coffee\",\"You did not respond, please tell me your answer\",\"Just choose one drink\")),hint9:_objectSpread({},hint(\"Yes! You are right! Let's see your final score.\",\"conclusion\")),hint10:_objectSpread({},hint(\"Sorry! you are wrong! Let's see your final score.\",\"conclusion\")),conclusion:{initial:\"prompt\",on:{ENDSPEECH:[{target:\"success\",cond:function cond(context){return grammar4[\"scores\"]>=3;}},{target:\"failure\",cond:function cond(context){return grammar4[\"scores\"]<3;}}]},states:{prompt:{entry:send(function(context){return{type:\"SPEAK\",value:\"Well,your final score is \".concat(grammar4[\"scores\"],\" out of 5.\")};})}}},success:{initial:\"prompt\",on:{ENDSPEECH:\"init\"},states:{prompt:{entry:say(\"Congratulations! You can have a date with me!\")}}},failure:{initial:\"prompt\",on:{ENDSPEECH:\"init\"},states:{prompt:{entry:say(\"Sorry, you need to try harder!\")}}}}};/* RASA API\n *  */var proxyurl=\"https://cors-anywhere.herokuapp.com/\";var rasaurl=\"https://finalprojectgame.herokuapp.com/model/parse\";var nluRequest=function nluRequest(text){return fetch(new Request(proxyurl+rasaurl,{method:\"POST\",headers:{\"Origin\":\"http://localhost:3000/react-xstate-colourchanger\"},// only required with proxy\nbody:\"{\\\"text\\\": \\\"\".concat(text,\"\\\"}\")})).then(function(data){return data.json();});};","map":{"version":3,"sources":["/home/hanzhe/finalgame/react-xstate-colourchanger/src/dmGame.ts"],"names":["send","assign","actions","cancel","say","text","_context","type","value","listen","promptAndAsk","prompt","speechprompt","helpmes","initial","states","entry","on","ENDSPEECH","hist","maxspeech","ask","delay","id","help","nomatch","hint","state","commands","grammar3","grammar4","dmMachine","init","CLICK","welcome","RECOGNISED","target","cond","context","recResult","option","MAXSPEECH","query","invoke","src","event","nluRequest","onDone","data","intent","name","console","log","onError","menu","todo","timer","game","question1","hint1","hint2","question2","hint3","hint4","question3","hint5","hint6","question4","hint7","hint8","question5","hint9","hint10","conclusion","success","failure","proxyurl","rasaurl","fetch","Request","method","headers","body","then","json"],"mappings":"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","sourcesContent":["import { MachineConfig, send, Action, assign, actions} from \"xstate\";\nimport \"./styles.scss\";\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport { useMachine, asEffect } from \"@xstate/react\";\nimport { inspect } from \"@xstate/inspect\";\n\nconst {cancel}=actions\n\nfunction say(text: string): Action<SDSContext, SDSEvent> {\n    return send((_context: SDSContext) => ({ type: \"SPEAK\", value: text }))\n}\n\nfunction listen(): Action<SDSContext, SDSEvent> {\n    return send('LISTEN')\n}\n\nfunction promptAndAsk(prompt: string, speechprompt:string, helpmes:string): MachineConfig<SDSContext, any, SDSEvent> {\n    return ({\n        initial: \"prompt\",\n        states: {\n            prompt: {\n                entry: say(prompt),\n                on: { ENDSPEECH: \"ask\" }\n            },\n            hist: {type: \"history\"},\n            maxspeech: {\n                entry: say(speechprompt),\n             on: {ENDSPEECH: \"ask\"}\n            \n        },  \n            ask: {\n                entry: [listen(), send('MAXSPEECH', {delay: 5000, id: \"maxsp\"})]\n            },\n            help: {entry: say(helpmes),\n                on: {ENDSPEECH: \"hist\" }\n            },\n            nomatch: {\n                entry: say(\"Sorry, please say your English in a clear way\"),\n                on: { ENDSPEECH:  \"prompt\" }\n            \n            }\n        }})\n}\n\nfunction hint(prompt: string, state: string): MachineConfig<SDSContext, any, SDSEvent>{\n    return ({entry: say(prompt),\n        on: {ENDSPEECH: state }})\n}\n\n\n\n\n\nconst commands = {\"help\": \"h\", \"Help\": \"H\"}\n\nconst grammar3 ={\"count\": 0}\n\nconst grammar4 ={\"scores\": 0}\n\n\nexport const dmMachine: MachineConfig<SDSContext, any, SDSEvent> = ({\n    initial: 'init',\n    states: {\n        init: {\n            on: {\n                CLICK: 'welcome'\n            }\n        },\n\t\twelcome: {\n            initial: \"prompt\",\n            on: {\n                RECOGNISED: [{\n                    target: \"query\",\n                    cond: (context) => !(context.recResult in commands),\n                    actions: [assign((context) => { return { option: context.recResult } }),assign((context) => { grammar3[\"count\"]=0}),cancel(\"maxsp\")],\n                    \n                },\n                {target: \".help\",\n                cond: (context) => context.recResult in commands }],\n                MAXSPEECH: [{target:\".maxspeech\",\n                cond: (context) => grammar3[\"count\"] <= 2,\n                actions: assign((context) => { grammar3[\"count\"]=grammar3[\"count\"]+1 } )\n                },{target: \"#root.dm.init\", \n                cond: (context) => grammar3[\"count\"] > 2, \n                actions:assign((context) => { grammar3[\"count\"]=0})}]\n            },\n            \n        ...promptAndAsk(\"What would you like to do?\", \n        \"You did not respond，just tell me what you want to do\", \"Please kindly tell me what you want to do\")\n    }, \n\t\tquery: {\n            invoke: {\n                id: \"rasa\",\n                src: (context, event) => nluRequest(context.option),\n                onDone: {\n                    target: \"menu\",\n                    actions: [assign((context, event) => { return  {option: event.data.intent.name} }),\n                    (context: SDSContext, event: any) => console.log(event.data)]\n                    //actions: assign({ intent: (context: SDSContext, event: any) =>{ return event.data }})\n\n                },\n                onError: {\n                    target: \"welcome\",\n                    actions: (context, event) => console.log(event.data)\n                }\n            }\n        },\n      \n        menu: {\n            initial: \"prompt\",\n            on: {\n                ENDSPEECH: [\n                    { target: \"todo\", cond: (context) => context.option === \"todo\" },\n                    { target: \"timer\", cond: (context) => context.option === \"timer\" },\n                    { target: \"game\", cond: (context) => context.option === \"game\"}\n                ]\n            },\n            states: {\n                prompt: {\n                    entry: send((context) => ({\n                        type: \"SPEAK\",\n                        value: `OK. I understand，you want a ${context.option}.`\n                    })),\n        },\n     /*            nomatch: {\n                    entry: say(\"Sorry, I don\"t understand\"),\n                    on: { ENDSPEECH: \"prompt\" }\n        } */ \n            }       \n        },\n\n\n        todo: {\n            initial: \"prompt\",\n            on: { ENDSPEECH: \"init\" },\n            states: {\n                prompt: {\n                    entry: send((context) => ({\n                        type: \"SPEAK\",\n                        value: `Let\"s create a to do item`\n                    }))\n                }}\n        },\n        \n        timer: {\n            initial: \"prompt\",\n            on: { ENDSPEECH: \"init\" },\n            states: {\n                prompt: {\n                    entry: send((context) => ({\n                        type: \"SPEAK\",\n                        value: `Let\"s create a timer`\n                    }))\n                }}\n        },\n        game: {\n            initial: \"prompt\",\n            on: { ENDSPEECH: \"question1\" },\n            states: {\n                prompt: {\n                    entry: send((context) => ({\n                        type: \"SPEAK\",\n                        value: `Let\"s play How well do you know me and let's go to the first question`\n                    }))\n                }}\n        },\n        question1: {\n            on: {\n                RECOGNISED: [{\n                    cond: (context) => context.recResult === \"a\",\n                    actions: [assign((context) => { grammar4[\"scores\"]= grammar4[\"scores\"]+1} ),assign((context) => { grammar3[\"count\"]=0}), cancel(\"maxsp\")],\n                    target: \"hint1\"\n\n                },\n                {\n                    cond: (context) => context.recResult === \"A\",\n                    actions: [assign((context) => { grammar4[\"scores\"]= grammar4[\"scores\"]+1} ),assign((context) => { grammar3[\"count\"]=0}), cancel(\"maxsp\")],\n                    target: \"hint1\"\n\n                },\n                \n                {\n                    cond: (context) => context.recResult === \"mint green\",\n                    actions: [assign((context) => { grammar4[\"scores\"]= grammar4[\"scores\"]+1} ),assign((context) => { grammar3[\"count\"]=0}), cancel(\"maxsp\")],\n                    target: \"hint1\"\n\n                },\n                {\n                    cond: (context) => context.recResult === \"b\",\n                    actions: [assign((context) => { grammar3[\"count\"]=0}), cancel(\"maxsp\")],\n                    target: \"hint2\"\n\n                },\n                {\n                    cond: (context) => context.recResult === \"B\",\n                    actions: [assign((context) => { grammar3[\"count\"]=0}), cancel(\"maxsp\")],\n                    target: \"hint2\"\n\n                },\n                \n                {\n                    cond: (context) => context.recResult === \"purple\",\n                    actions: [assign((context) => { grammar3[\"count\"]=0}), cancel(\"maxsp\")],\n                    target: \"hint2\"\n\n                },\n                { target: \".nomatch\" ,\n                 cond: (context) => !(context.recResult in commands),\n                 actions: cancel(\"maxsp\")},\n                 {target: \".help\",\n                 cond: (context) => context.recResult in commands}],\n                 MAXSPEECH: [{target:\".maxspeech\",\n                 cond: (context) => grammar3[\"count\"] <= 2,\n                actions: assign((context) => { grammar3[\"count\"]=grammar3[\"count\"]+1 } )\n                },{target: \"#root.dm.init\", \n                cond: (context) => grammar3[\"count\"] > 2, \n                actions:assign((context) => { grammar3[\"count\"]=0})}] \n            },\n             ...promptAndAsk(\"What colour do I like?  A, mint green, B purple\", \"You did not respond, please tell me the colour\", \"Just choose one colour\")\n        },\n        hint1:{\n            ...hint(\"Yes! You are right! Let's move to the next question.\", \"question2\")  \n        },\n        hint2:{\n            ...hint(\"Sorry! you are wrong! Let's move to the next question.\", \"question2\")  \n        },\n        question2: {\n            initial: \"prompt\",\n            on: {\n\t            RECOGNISED: [{\n                    cond: (context) => context.recResult === \"a\",\n                    actions: [assign((context) => { grammar4[\"scores\"]= grammar4[\"scores\"]+1} ),assign((context) => { grammar3[\"count\"]=0}), cancel(\"maxsp\")],\n                    target: \"hint3\"\n\n                },\n                {\n                    cond: (context) => context.recResult === \"A\",\n                    actions: [assign((context) => { grammar4[\"scores\"]= grammar4[\"scores\"]+1} ),assign((context) => { grammar3[\"count\"]=0}), cancel(\"maxsp\")],\n                    target: \"hint3\"\n\n                },\n                \n                {\n                    cond: (context) => context.recResult === \"pizza\",\n                    actions: [assign((context) => { grammar4[\"scores\"]= grammar4[\"scores\"]+1} ),assign((context) => { grammar3[\"count\"]=0}), cancel(\"maxsp\")],\n                    target: \"hint3\"\n\n                },\n                {\n                    cond: (context) => context.recResult === \"b\",\n                    actions: [assign((context) => { grammar3[\"count\"]=0}), cancel(\"maxsp\")],\n                    target: \"hint4\"\n\n                },\n                {\n                    cond: (context) => context.recResult === \"B\",\n                    actions: [assign((context) => { grammar3[\"count\"]=0}), cancel(\"maxsp\")],\n                    target: \"hint4\"\n\n                },\n                \n                {\n                    cond: (context) => context.recResult === \"dumplings\",\n                    actions: [assign((context) => { grammar3[\"count\"]=0}), cancel(\"maxsp\")],\n                    target: \"hint4\"\n\n                },\n                { target: \".nomatch\" ,\n                 cond: (context) => !(context.recResult in commands),\n                 actions: cancel(\"maxsp\")},\n                 {target: \".help\",\n                 cond: (context) => context.recResult in commands}],\n                 MAXSPEECH: [{target:\".maxspeech\",\n                 cond: (context) => grammar3[\"count\"] <= 2,\n                actions: assign((context) => { grammar3[\"count\"]=grammar3[\"count\"]+1 } )\n                },{target: \"#root.dm.init\", \n                cond: (context) => grammar3[\"count\"] > 2, \n                actions:assign((context) => { grammar3[\"count\"]=0})}] \n\t        },\n            ...promptAndAsk(\"What's my favourite food?  A, pizza, B dumplings\", \"You did not respond, please tell me your answer\", \"Just choose one food\") \n        },\n        hint3:{\n            ...hint(\"Yes! You are right! Let's continue to the next question.\", \"question3\")  \n        },\n        hint4:{\n            ...hint(\"Sorry! you are wrong! Let's contiue to the next question.\", \"question3\")  \n        },\n        question3: {\n            initial: \"prompt\",\n            on: {\n\t            RECOGNISED: [{\n                    cond: (context) => context.recResult === \"b\",\n                    actions: [assign((context) => { grammar4[\"scores\"]= grammar4[\"scores\"]+1} ),assign((context) => { grammar3[\"count\"]=0}), cancel(\"maxsp\")],\n                    target: \"hint5\"\n\n                },\n                {\n                    cond: (context) => context.recResult === \"B\",\n                    actions: [assign((context) => { grammar4[\"scores\"]= grammar4[\"scores\"]+1} ),assign((context) => { grammar3[\"count\"]=0}), cancel(\"maxsp\")],\n                    target: \"hint5\"\n\n                },\n                \n                {\n                    cond: (context) => context.recResult === \"lavender\",\n                    actions: [assign((context) => { grammar4[\"scores\"]= grammar4[\"scores\"]+1} ),assign((context) => { grammar3[\"count\"]=0}), cancel(\"maxsp\")],\n                    target: \"hint5\"\n\n                },\n                {\n                    cond: (context) => context.recResult === \"a\",\n                    actions: [assign((context) => { grammar3[\"count\"]=0}), cancel(\"maxsp\")],\n                    target: \"hint6\"\n\n                },\n                {\n                    cond: (context) => context.recResult === \"A\",\n                    actions: [assign((context) => { grammar3[\"count\"]=0}), cancel(\"maxsp\")],\n                    target: \"hint6\"\n\n                },\n                \n                {\n                    cond: (context) => context.recResult === \"rosa\",\n                    actions: [assign((context) => { grammar3[\"count\"]=0}), cancel(\"maxsp\")],\n                    target: \"hint6\"\n\n                },\n                { target: \".nomatch\" ,\n                 cond: (context) => !(context.recResult in commands),\n                 actions: cancel(\"maxsp\")},\n                 {target: \".help\",\n                 cond: (context) => context.recResult in commands}],\n                 MAXSPEECH: [{target:\".maxspeech\",\n                 cond: (context) => grammar3[\"count\"] <= 2,\n                actions: assign((context) => { grammar3[\"count\"]=grammar3[\"count\"]+1 } )\n                },{target: \"#root.dm.init\", \n                cond: (context) => grammar3[\"count\"] > 2, \n                actions:assign((context) => { grammar3[\"count\"]=0})}] \n\t        },\n            ...promptAndAsk(\"What's my favourite flower?  A, rose, B lavender\", \"You did not respond, please tell me your answer\", \"Just choose one country\") \n        },\n        hint5:{\n            ...hint(\"Yes! You are right! Let's continue to the next question.\", \"question4\")  \n        },\n        hint6:{\n            ...hint(\"Sorry! you are wrong! Let's contiue to the next question.\", \"question4\")  \n        },\n        question4: {\n            initial: \"prompt\",\n            on: {\n\t            RECOGNISED: [{\n                    cond: (context) => context.recResult === \"b\",\n                    actions: [assign((context) => { grammar4[\"scores\"]= grammar4[\"scores\"]+1} ),assign((context) => { grammar3[\"count\"]=0}), cancel(\"maxsp\")],\n                    target: \"hint7\"\n\n                },\n                {\n                    cond: (context) => context.recResult === \"B\",\n                    actions: [assign((context) => { grammar4[\"scores\"]= grammar4[\"scores\"]+1} ),assign((context) => { grammar3[\"count\"]=0}), cancel(\"maxsp\")],\n                    target: \"hint7\"\n\n                },\n                \n                {\n                    cond: (context) => context.recResult === \"cat\",\n                    actions: [assign((context) => { grammar4[\"scores\"]= grammar4[\"scores\"]+1} ),assign((context) => { grammar3[\"count\"]=0}), cancel(\"maxsp\")],\n                    target: \"hint7\"\n\n                },\n                {\n                    cond: (context) => context.recResult === \"a\",\n                    actions: [assign((context) => { grammar3[\"count\"]=0}), cancel(\"maxsp\")],\n                    target: \"hint8\"\n\n                },\n                {\n                    cond: (context) => context.recResult === \"A\",\n                    actions: [assign((context) => { grammar3[\"count\"]=0}), cancel(\"maxsp\")],\n                    target: \"hint8\"\n\n                },\n                \n                {\n                    cond: (context) => context.recResult === \"dog\",\n                    actions: [assign((context) => { grammar3[\"count\"]=0}), cancel(\"maxsp\")],\n                    target: \"hint8\"\n\n                },\n                { target: \".nomatch\" ,\n                 cond: (context) => !(context.recResult in commands),\n                 actions: cancel(\"maxsp\")},\n                 {target: \".help\",\n                 cond: (context) => context.recResult in commands}],\n                 MAXSPEECH: [{target:\".maxspeech\",\n                 cond: (context) => grammar3[\"count\"] <= 2,\n                actions: assign((context) => { grammar3[\"count\"]=grammar3[\"count\"]+1 } )\n                },{target: \"#root.dm.init\", \n                cond: (context) => grammar3[\"count\"] > 2, \n                actions:assign((context) => { grammar3[\"count\"]=0})}] \n\t        },\n            ...promptAndAsk(\"What's my favourite pet?  A, dog, B cat\", \"You did not respond, please tell me your answer\", \"Just choose one food\") \n        },\n        hint7:{\n            ...hint(\"Yes! You are right! Let's continue to the next question.\", \"question5\")  \n        },\n        hint8:{\n            ...hint(\"Sorry! you are wrong! Let's contiue to the next question.\", \"question5\")  \n        },\n        question5: {\n            initial: \"prompt\",\n            on: {\n\t            RECOGNISED: [{\n                    cond: (context) => context.recResult === \"b\",\n                    actions: [assign((context) => { grammar4[\"scores\"]= grammar4[\"scores\"]+1} ),assign((context) => { grammar3[\"count\"]=0}), cancel(\"maxsp\")],\n                    target: \"hint9\"\n\n                },\n                {\n                    cond: (context) => context.recResult === \"B\",\n                    actions: [assign((context) => { grammar4[\"scores\"]= grammar4[\"scores\"]+1} ),assign((context) => { grammar3[\"count\"]=0}), cancel(\"maxsp\")],\n                    target: \"hint9\"\n\n                },\n                \n                {\n                    cond: (context) => context.recResult === \"coffee\",\n                    actions: [assign((context) => { grammar4[\"scores\"]= grammar4[\"scores\"]+1} ),assign((context) => { grammar3[\"count\"]=0}), cancel(\"maxsp\")],\n                    target: \"hint9\"\n\n                },\n                {\n                    cond: (context) => context.recResult === \"a\",\n                    actions: [assign((context) => { grammar3[\"count\"]=0}), cancel(\"maxsp\")],\n                    target: \"hint10\"\n\n                },\n                {\n                    cond: (context) => context.recResult === \"A\",\n                    actions: [assign((context) => { grammar3[\"count\"]=0}), cancel(\"maxsp\")],\n                    target: \"hint10\"\n\n                },\n                \n                {\n                    cond: (context) => context.recResult === \"tea\",\n                    actions: [assign((context) => { grammar3[\"count\"]=0}), cancel(\"maxsp\")],\n                    target: \"hint10\"\n\n                },\n                { target: \".nomatch\" ,\n                 cond: (context) => !(context.recResult in commands),\n                 actions: cancel(\"maxsp\")},\n                 {target: \".help\",\n                 cond: (context) => context.recResult in commands}],\n                 MAXSPEECH: [{target:\".maxspeech\",\n                 cond: (context) => grammar3[\"count\"] <= 2,\n                actions: assign((context) => { grammar3[\"count\"]=grammar3[\"count\"]+1 } )\n                },{target: \"#root.dm.init\", \n                cond: (context) => grammar3[\"count\"] > 2, \n                actions:assign((context) => { grammar3[\"count\"]=0})}] \n\t        },\n            ...promptAndAsk(\"What's my favourite drink?  A, tea, B coffee\", \"You did not respond, please tell me your answer\", \"Just choose one drink\") \n        },\n        hint9:{\n            ...hint(\"Yes! You are right! Let's see your final score.\", \"conclusion\")  \n        },\n        hint10:{\n            ...hint(\"Sorry! you are wrong! Let's see your final score.\", \"conclusion\")  \n        },\n        conclusion: {\n            initial: \"prompt\",\n            on: {\n                ENDSPEECH: [\n                    { target: \"success\", cond: (context) => grammar4[\"scores\"] >= 3 },\n                    { target: \"failure\", cond: (context) => grammar4[\"scores\"] < 3 },\n                ]\n           }, \n            states: {\n                prompt: {\n                    entry: send((context) => ({\n                        type: \"SPEAK\",\n                        value: `Well,your final score is ${grammar4[\"scores\"]} out of 5.`\n                    })),\n                }\n            }\n        },\n\t        success:{\n                initial: \"prompt\",\n                on: { ENDSPEECH: \"init\" },\n                states: {\n                    prompt: {\n                        entry: say(\"Congratulations! You can have a date with me!\"),\n                        \n                    },\n                }\n            },\n            failure:{\n                initial: \"prompt\",\n                on: { ENDSPEECH: \"init\" },\n                states: {\n                    prompt: {\n                        entry: say(\"Sorry, you need to try harder!\"),\n                        \n                    },\n                }\n            },\n        \n        }\n    })\n\n\t\t\t/* RASA API\n *  */\nconst proxyurl = \"https://cors-anywhere.herokuapp.com/\";\nconst rasaurl = \"https://finalprojectgame.herokuapp.com/model/parse\"\nconst nluRequest = (text: string) =>\n    fetch(new Request(proxyurl + rasaurl, {\n        method: \"POST\",\n        headers: { \"Origin\": \"http://localhost:3000/react-xstate-colourchanger\" }, // only required with proxy\n        body: `{\"text\": \"${text}\"}`\n    }))\n        .then(data => data.json());\n"]},"metadata":{},"sourceType":"module"}