(this["webpackJsonpxstate-react-typescript-template"]=this["webpackJsonpxstate-react-typescript-template"]||[]).push([[0],{23:function(t,n,e){},40:function(t,n,e){"use strict";e.r(n);var o=e(27),c=e(6),r=(e(23),e(8),e(24)),i=e(11),u=e(20),s=e(2),a=e(43),l=e(44),b=i.a.cancel;function p(t){return Object(s.q)((function(n){return{type:"SPEAK",value:t}}))}function f(t,n,e){return{initial:"prompt",states:{prompt:{entry:p(t),on:{ENDSPEECH:"ask"}},hist:{type:"history"},maxspeech:{entry:p(n),on:{ENDSPEECH:"ask"}},ask:{entry:[Object(s.q)("LISTEN"),Object(s.q)("MAXSPEECH",{delay:5e3,id:"maxsp"})]},help:{entry:p(e),on:{ENDSPEECH:"hist"}},nomatch:{entry:p("Sorry, please say your English in a clear way"),on:{ENDSPEECH:"prompt"}}}}}function d(t,n){return{entry:p(t),on:{ENDSPEECH:n}}}var m={help:"h",Help:"H"},h={count:0},g={scores:0},O={initial:"init",states:{init:{on:{CLICK:"welcome"}},welcome:Object(c.a)({initial:"prompt",on:{RECOGNISED:[{target:"query",cond:function(t){return!(t.recResult in m)},actions:[Object(s.b)((function(t){return{option:t.recResult}})),Object(s.b)((function(t){h.count=0})),b("maxsp")]},{target:".help",cond:function(t){return t.recResult in m}}],MAXSPEECH:[{target:".maxspeech",cond:function(t){return h.count<=2},actions:Object(s.b)((function(t){h.count=h.count+1}))},{target:"#root.dm.init",cond:function(t){return h.count>2},actions:Object(s.b)((function(t){h.count=0}))}]}},f("What would you like to do?","You did not respond\uff0cjust tell me what you want to do","Please kindly tell me what you want to do")),query:{invoke:{id:"rasa",src:function(t,n){return j(t.option)},onDone:{target:"menu",actions:[Object(s.b)((function(t,n){return{option:n.data.intent.name}})),function(t,n){return console.log(n.data)}]},onError:{target:"welcome",actions:function(t,n){return console.log(n.data)}}}},menu:{initial:"prompt",on:{ENDSPEECH:[{target:"todo",cond:function(t){return"todo"===t.option}},{target:"timer",cond:function(t){return"timer"===t.option}},{target:"game",cond:function(t){return"game"===t.option}}]},states:{prompt:{entry:Object(s.q)((function(t){return{type:"SPEAK",value:"OK. I understand\uff0cyou want a ".concat(t.option,".")}}))}}},todo:{initial:"prompt",on:{ENDSPEECH:"init"},states:{prompt:{entry:Object(s.q)((function(t){return{type:"SPEAK",value:'Let"s create a to do item'}}))}}},timer:{initial:"prompt",on:{ENDSPEECH:"init"},states:{prompt:{entry:Object(s.q)((function(t){return{type:"SPEAK",value:'Let"s create a timer'}}))}}},game:{initial:"prompt",on:{ENDSPEECH:"question1"},states:{prompt:{entry:Object(s.q)((function(t){return{type:"SPEAK",value:'Let"s play How well do you know me?'}}))}}},question1:Object(c.a)({on:{RECOGNISED:[{cond:function(t){return"a"===t.recResult},actions:[Object(s.b)((function(t){g.scores=g.scores+1})),Object(s.b)((function(t){h.count=0})),b("maxsp")],target:"hint1"},{cond:function(t){return"A"===t.recResult},actions:[Object(s.b)((function(t){g.scores=g.scores+1})),Object(s.b)((function(t){h.count=0})),b("maxsp")],target:"hint1"},{cond:function(t){return"mint green"===t.recResult},actions:[Object(s.b)((function(t){g.scores=g.scores+1})),Object(s.b)((function(t){h.count=0})),b("maxsp")],target:"hint1"},{cond:function(t){return"b"===t.recResult},actions:[Object(s.b)((function(t){h.count=0})),b("maxsp")],target:"hint2"},{cond:function(t){return"B"===t.recResult},actions:[Object(s.b)((function(t){h.count=0})),b("maxsp")],target:"hint2"},{cond:function(t){return"purple"===t.recResult},actions:[Object(s.b)((function(t){h.count=0})),b("maxsp")],target:"hint2"},{target:".nomatch",cond:function(t){return!(t.recResult in m)},actions:b("maxsp")},{target:".help",cond:function(t){return t.recResult in m}}],MAXSPEECH:[{target:".maxspeech",cond:function(t){return h.count<=2},actions:Object(s.b)((function(t){h.count=h.count+1}))},{target:"#root.dm.init",cond:function(t){return h.count>2},actions:Object(s.b)((function(t){h.count=0}))}]}},f("What colour do I like?  A mint green, B purple","You did not respond, please tell me the colour","Just choose one colour")),hint1:Object(c.a)({},d("Yes! You are right! Let's move to the next question.","question2")),hint2:Object(c.a)({},d("Sorry! you are wrong! Let's move to the next question.","question2")),question2:Object(c.a)({initial:"prompt",on:{RECOGNISED:[{cond:function(t){return"a"===t.recResult},actions:[Object(s.b)((function(t){g.scores=g.scores+1})),Object(s.b)((function(t){h.count=0})),b("maxsp")],target:"hint3"},{cond:function(t){return"A"===t.recResult},actions:[Object(s.b)((function(t){g.scores=g.scores+1})),Object(s.b)((function(t){h.count=0})),b("maxsp")],target:"hint3"},{cond:function(t){return"pizza"===t.recResult},actions:[Object(s.b)((function(t){g.scores=g.scores+1})),Object(s.b)((function(t){h.count=0})),b("maxsp")],target:"hint3"},{cond:function(t){return"b"===t.recResult},actions:[Object(s.b)((function(t){h.count=0})),b("maxsp")],target:"hint4"},{cond:function(t){return"B"===t.recResult},actions:[Object(s.b)((function(t){h.count=0})),b("maxsp")],target:"hint4"},{cond:function(t){return"dumplings"===t.recResult},actions:[Object(s.b)((function(t){h.count=0})),b("maxsp")],target:"hint4"},{target:".nomatch",cond:function(t){return!(t.recResult in m)},actions:b("maxsp")},{target:".help",cond:function(t){return t.recResult in m}}],MAXSPEECH:[{target:".maxspeech",cond:function(t){return h.count<=2},actions:Object(s.b)((function(t){h.count=h.count+1}))},{target:"#root.dm.init",cond:function(t){return h.count>2},actions:Object(s.b)((function(t){h.count=0}))}]}},f("What's my favourite food?  A pizza, B dumplings","You did not respond, please tell me your answer","Just choose one food")),hint3:Object(c.a)({},d("Yes! You are right! Let's continue to the next question.","question3")),hint4:Object(c.a)({},d("Sorry! you are wrong! Let's contiue to the next question.","question3")),question3:Object(c.a)({initial:"prompt",on:{RECOGNISED:[{cond:function(t){return"b"===t.recResult},actions:[Object(s.b)((function(t){g.scores=g.scores+1})),Object(s.b)((function(t){h.count=0})),b("maxsp")],target:"hint5"},{cond:function(t){return"B"===t.recResult},actions:[Object(s.b)((function(t){g.scores=g.scores+1})),Object(s.b)((function(t){h.count=0})),b("maxsp")],target:"hint5"},{cond:function(t){return"lavender"===t.recResult},actions:[Object(s.b)((function(t){g.scores=g.scores+1})),Object(s.b)((function(t){h.count=0})),b("maxsp")],target:"hint5"},{cond:function(t){return"a"===t.recResult},actions:[Object(s.b)((function(t){h.count=0})),b("maxsp")],target:"hint6"},{cond:function(t){return"A"===t.recResult},actions:[Object(s.b)((function(t){h.count=0})),b("maxsp")],target:"hint6"},{cond:function(t){return"rosa"===t.recResult},actions:[Object(s.b)((function(t){h.count=0})),b("maxsp")],target:"hint6"},{target:".nomatch",cond:function(t){return!(t.recResult in m)},actions:b("maxsp")},{target:".help",cond:function(t){return t.recResult in m}}],MAXSPEECH:[{target:".maxspeech",cond:function(t){return h.count<=2},actions:Object(s.b)((function(t){h.count=h.count+1}))},{target:"#root.dm.init",cond:function(t){return h.count>2},actions:Object(s.b)((function(t){h.count=0}))}]}},f("What's my favourite flower?  A rose, B lavender","You did not respond, please tell me your answer","Just choose one country")),hint5:Object(c.a)({},d("Yes! You are right! Let's continue to the next question.","question4")),hint6:Object(c.a)({},d("Sorry! you are wrong! Let's contiue to the next question.","question4")),question4:Object(c.a)({initial:"prompt",on:{RECOGNISED:[{cond:function(t){return"b"===t.recResult},actions:[Object(s.b)((function(t){g.scores=g.scores+1})),Object(s.b)((function(t){h.count=0})),b("maxsp")],target:"hint7"},{cond:function(t){return"B"===t.recResult},actions:[Object(s.b)((function(t){g.scores=g.scores+1})),Object(s.b)((function(t){h.count=0})),b("maxsp")],target:"hint7"},{cond:function(t){return"cat"===t.recResult},actions:[Object(s.b)((function(t){g.scores=g.scores+1})),Object(s.b)((function(t){h.count=0})),b("maxsp")],target:"hint7"},{cond:function(t){return"a"===t.recResult},actions:[Object(s.b)((function(t){h.count=0})),b("maxsp")],target:"hint8"},{cond:function(t){return"A"===t.recResult},actions:[Object(s.b)((function(t){h.count=0})),b("maxsp")],target:"hint8"},{cond:function(t){return"dog"===t.recResult},actions:[Object(s.b)((function(t){h.count=0})),b("maxsp")],target:"hint8"},{target:".nomatch",cond:function(t){return!(t.recResult in m)},actions:b("maxsp")},{target:".help",cond:function(t){return t.recResult in m}}],MAXSPEECH:[{target:".maxspeech",cond:function(t){return h.count<=2},actions:Object(s.b)((function(t){h.count=h.count+1}))},{target:"#root.dm.init",cond:function(t){return h.count>2},actions:Object(s.b)((function(t){h.count=0}))}]}},f("What's my favourite pet?  A dog, B cat","You did not respond, please tell me your answer","Just choose one food")),hint7:Object(c.a)({},d("Yes! You are right! Let's continue to the next question.","question5")),hint8:Object(c.a)({},d("Sorry! you are wrong! Let's contiue to the next question.","question5")),question5:Object(c.a)({initial:"prompt",on:{RECOGNISED:[{cond:function(t){return"b"===t.recResult},actions:[Object(s.b)((function(t){g.scores=g.scores+1})),Object(s.b)((function(t){h.count=0})),b("maxsp")],target:"hint9"},{cond:function(t){return"B"===t.recResult},actions:[Object(s.b)((function(t){g.scores=g.scores+1})),Object(s.b)((function(t){h.count=0})),b("maxsp")],target:"hint9"},{cond:function(t){return"coffee"===t.recResult},actions:[Object(s.b)((function(t){g.scores=g.scores+1})),Object(s.b)((function(t){h.count=0})),b("maxsp")],target:"hint9"},{cond:function(t){return"a"===t.recResult},actions:[Object(s.b)((function(t){h.count=0})),b("maxsp")],target:"hint10"},{cond:function(t){return"A"===t.recResult},actions:[Object(s.b)((function(t){h.count=0})),b("maxsp")],target:"hint10"},{cond:function(t){return"tea"===t.recResult},actions:[Object(s.b)((function(t){h.count=0})),b("maxsp")],target:"hint10"},{target:".nomatch",cond:function(t){return!(t.recResult in m)},actions:b("maxsp")},{target:".help",cond:function(t){return t.recResult in m}}],MAXSPEECH:[{target:".maxspeech",cond:function(t){return h.count<=2},actions:Object(s.b)((function(t){h.count=h.count+1}))},{target:"#root.dm.init",cond:function(t){return h.count>2},actions:Object(s.b)((function(t){h.count=0}))}]}},f("What's my favourite drink?  A tea, B coffee","You did not respond, please tell me your answer","Just choose one drink")),hint9:Object(c.a)({},d("Yes! You are right! Let's continue to the next question.","conclusion")),hint10:Object(c.a)({},d("Sorry! you are wrong! Let's contiue to the next question.","conclusion")),conclusion:{initial:"prompt",on:{ENDSPEECH:[{target:"success",cond:function(t){return g.scores>=3}},{target:"failure",cond:function(t){return g.scores<3}}]},states:{prompt:{entry:Object(s.q)((function(t){return{type:"SPEAK",value:"Congratulations! Your final score is ".concat(g.scores," out of 5.")}}))}}},success:{initial:"prompt",on:{ENDSPEECH:"init"},states:{prompt:{entry:p("You can have a date with me!")}}},failure:{initial:"prompt",on:{ENDSPEECH:"init"},states:{prompt:{entry:p("Sorry, you need to try harder!")}}}}},j=function(t){return fetch(new Request("https://cors-anywhere.herokuapp.com/https://finalprojectgame.herokuapp.com/model/parse",{method:"POST",headers:{Origin:"http://localhost:3000/react-xstate-colourchanger"},body:'{"text": "'.concat(t,'"}')})).then((function(t){return t.json()}))},E=e(22),y=e(13),R=i.a.cancel;Object(l.a)({url:"https://statecharts.io/inspect",iframe:!1});var x=Object(u.a)({id:"root",type:"parallel",states:{dm:Object(c.a)({},O),asrtts:{initial:"idle",states:{idle:{on:{LISTEN:"recognising",SPEAK:{target:"speaking",actions:Object(s.b)((function(t,n){return{ttsAgenda:n.value}}))}}},recognising:{initial:"progress",entry:"recStart",exit:"recStop",on:{ASRRESULT:{actions:["recLogResult",Object(s.b)((function(t,n){return{recResult:n.value}}))],target:".match"},RECOGNISED:{target:"idle",actions:R("maxsp")},MAXSPEECH:"idle"},states:{progress:{},match:{entry:Object(s.q)("RECOGNISED")}}},speaking:{entry:"ttsStart",on:{ENDSPEECH:"idle"}}}}}},{actions:{recLogResult:function(t){console.log("<< ASR: "+t.recResult)},test:function(){console.log("test")},logIntent:function(t){console.log("<< NLU intent: "+t.nluData.intent.name)}}}),S=function(t){switch(!0){case t.state.matches({asrtts:"recognising"}):return Object(y.jsx)("button",Object(c.a)(Object(c.a)({type:"button",className:"glow-on-hover",style:{animation:"glowing 20s linear"}},t),{},{children:"listen!"}));case t.state.matches({asrtts:"speaking"}):return Object(y.jsx)("button",Object(c.a)(Object(c.a)({type:"button",className:"glow-on-hover",style:{animation:"bordering 1s infinite"}},t),{},{children:"speak!"}));default:return Object(y.jsx)("button",Object(c.a)(Object(c.a)({type:"button",className:"glow-on-hover"},t),{},{children:"Welcome!"}))}};function C(){var t=Object(E.useSpeechSynthesis)({onEnd:function(){b("ENDSPEECH")}}),n=t.speak,e=t.cancel,c=(t.speaking,Object(E.useSpeechRecognition)({onResult:function(t){b({type:"ASRRESULT",value:t})}})),r=c.listen,i=(c.listening,c.stop),u=Object(a.b)(x,{devTools:!0,actions:{recStart:Object(a.a)((function(){console.log("Ready to receive your speech."),r({interimResults:!1,continuous:!0})})),recStop:Object(a.a)((function(){console.log("Recognition stopped."),i()})),changeColour:Object(a.a)((function(t){console.log("Repainting..."),document.body.style.background=t.recResult})),ttsStart:Object(a.a)((function(t,e){console.log("Speaking..."),n({text:t.ttsAgenda})})),ttsCancel:Object(a.a)((function(t,n){console.log("TTS STOP..."),e()}))}}),s=Object(o.a)(u,3),l=s[0],b=s[1];s[2];return Object(y.jsx)("div",{className:"App",children:Object(y.jsx)(S,{state:l,onClick:function(){return b("CLICK")}})})}var q=document.getElementById("root");r.render(Object(y.jsx)(C,{}),q)}},[[40,1,2]]]);
//# sourceMappingURL=main.296d367d.chunk.js.map